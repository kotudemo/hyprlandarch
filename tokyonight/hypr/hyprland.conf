# Monitor configuration
monitor=,1920x1080@143.98Hz,auto,1

# Different variables
$tuiFileManager=$terminal -e sh -c 'yazi'
$fileManager=nautilus
$mainMod=SUPER
$menu=fuzzel
$terminal=ghostty

# Autostart
exec-once=qs -c noctalia-shell
exec-once=wl-paste --type text --watch cliphist store
exec-once=wl-paste --type image --watch cliphist store
exec-once=wl-clip-persist --clipboard both
exec-once=swww-daemon
exec-once=swww img ~/Pictures/walls/wallpaper-theme-converter.png
exec-once=hyprctl setcursor Bibata-Modern-Ice 24
exec-once=systemctl --user start hypridle.service
exec-once=systemctl --user start hyprpolkitagent.service
exec-once=wlsunset -l 53.1 -L 50.0 -t 4500 -T 5000
# Usual stuff
general {
  allow_tearing=false
  border_size=3
  col.active_border=rgba(88,158,215,1) rgba(61,110,149,1) 45deg
  col.inactive_border=rgba(3c3836ff)
  gaps_in=0
  gaps_out=0
  layout=master
  resize_on_border=true
}

# Disable notifications after update
ecosystem {
  no_update_news=true
}

# No animations üòù
animations {
  enabled=false
}

# No blur, shadows and transparency üóø
decoration {
  blur {
    enabled=false
  }

  shadow {
    enabled=false
  }
  active_opacity=1.000000
  inactive_opacity=1.000000
  rounding=0
}

# 3 finger swipe gesture for workspace switching
gesture = 3, horizontal, workspace
gestures {
  workspace_swipe_forever=true
  workspace_swipe_invert=false
}

# Keyboard layout configuration
input {
  kb_layout=us,ru
  kb_options=grp:alt_shift_toggle
  follow_mouse = 1
  sensitivity = -0.5
}

# DWM-like window layout
master {
  mfact=0.500000
  new_on_top=true
  new_status=slave
}

dwindle {
  preserve_split=true
  pseudotile=true
}

# No default wallpaper
misc {
  disable_hyprland_logo=true
  force_default_wallpaper=0
}

# Main keybinds. See README.md for a nice table
bind=$mainMod, Return, exec, $terminal
bind=$mainMod,       Q, killactive,
bind=$mainMod SHIFT, Q, exec, hyprctl kill # Forcefully zap a window
bind=$mainMod SHIFT, M, exit,
bind=$mainMod,       E, exec, $fileManager
bind=$mainMod SHIFT, E, exec, $tuiFileManager
bind=$mainMod,       SPACE, togglefloating,
bind=$mainMod,       V, fullscreen,
bind=$mainMod,       D, exec, $menu
bind=$mainMod ALT,   T, pin,
bind=$mainMod,       J, togglesplit,
bind=$mainMod,       R, exec, bemoji -cn
bind=$mainMod SHIFT, V, exec, cliphist list | $menu --dmenu | cliphist decode | wl-copy
bind=$mainMod,       L, exec, hyprlock
bind=$mainMod SHIFT, C, exec, hyprpicker -an
# bind=$mainMod,       N, exec, swaync-client -t
bind= CTRL, Print, exec, grimblast -c copysave screen ~/Pictures/Screenshots/screen-$(date +%s).png
bind= , Print, exec, grimblast -f copysave area ~/Pictures/Screenshots/screen-$(date +%s).png
bind= SUPER_SHIFT, S, exec, grimblast -f copy area
bind= SUPER_SHIFT, T, exec, grimblast -f save area - | tesseract stdin stdout -l eng+rus --psm 6 | wl-copy
bind= SUPER_CTRL, S, exec, grimblast -f save area - | swappy -f -
# Global binds
# bind=$mainMod SHIFT, O, pass, class:^(com\.obsproject\.Studio)$

# Move focus
bind=$mainMod, left, movefocus, l
bind=$mainMod, right, movefocus, r
bind=$mainMod, up, movefocus, u
bind=$mainMod, down, movefocus, d

# Swap window
bind=$mainMod SHIFT, left,  swapwindow, l
bind=$mainMod SHIFT, right, swapwindow, r
bind=$mainMod SHIFT, up,    swapwindow, u
bind=$mainMod SHIFT, down,  swapwindow, d

# Resize window                           X  Y
bind=$mainMod CTRL, left,  resizeactive, -60 0
bind=$mainMod CTRL, right, resizeactive,  60 0
bind=$mainMod CTRL, up,    resizeactive,  0 -60
bind=$mainMod CTRL, down,  resizeactive,  0  60

# Switch to workspace
bind=$mainMod, 1, workspace, 1
bind=$mainMod, 2, workspace, 2
bind=$mainMod, 3, workspace, 3
bind=$mainMod, 4, workspace, 4
bind=$mainMod, 5, workspace, 5
bind=$mainMod, 6, workspace, 6
bind=$mainMod, 7, workspace, 7
bind=$mainMod, 8, workspace, 8
bind=$mainMod, 9, workspace, 9
bind=$mainMod, 0, workspace, 10

# Move window to workspace
bind=$mainMod SHIFT, 1, movetoworkspacesilent, 1
bind=$mainMod SHIFT, 2, movetoworkspacesilent, 2
bind=$mainMod SHIFT, 3, movetoworkspacesilent, 3
bind=$mainMod SHIFT, 4, movetoworkspacesilent, 4
bind=$mainMod SHIFT, 5, movetoworkspacesilent, 5
bind=$mainMod SHIFT, 6, movetoworkspacesilent, 6
bind=$mainMod SHIFT, 7, movetoworkspacesilent, 7
bind=$mainMod SHIFT, 8, movetoworkspacesilent, 8
bind=$mainMod SHIFT, 9, movetoworkspacesilent, 9
bind=$mainMod SHIFT, 0, movetoworkspacesilent, 10

# Magic workspace ü™Ñ
bind=$mainMod,       F, togglespecialworkspace,  magic
bind=$mainMod SHIFT, F, movetoworkspace, special:magic

# Volume management
bindel=,XF86AudioRaiseVolume,  exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel=,XF86AudioLowerVolume,  exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel=,XF86AudioMute,         exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel=,XF86AudioMicMute,      exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Brightness management
bindel=$mainMod, bracketright, exec, brightnessctl s 10%+
bindel=$mainMod, bracketleft,  exec, brightnessctl s 10%-

# Multimedia binds
bindl=, XF86AudioNext,  exec, playerctl next
bindl=, XF86AudioPause, exec, playerctl play-pause
bindl=, XF86AudioPlay,  exec, playerctl play-pause
bindl=, XF86AudioPrev,  exec, playerctl previous

# Move with LMS
bindm=$mainMod, mouse:272, movewindow
# Resize with RMS
bindm=$mainMod, mouse:273, resizewindow

#fast wokrspace swap
bind=$mainMod, mouse_down, workspace, e+1
bind=$mainMod, mouse_up, workspace, e-1

# Environment variables
env=XDG_CURRENT_DESKTOP,Hyprland
env=XDG_SESSION_TYPE,wayland
env=XDG_SESSION_DESKTOP,Hyprland
env=QT_QPA_PLATFORM,wayland
env=QT_QPA_PLATFORMTHEME,qt5ct
env=QT_QPA_PLATFORMTHEME_QT6,qt6ct
env=XCURSOR_SIZE,24
env=HYPRCURSOR_SIZE,24
env=WLR_NO_HARDWARE_CURSORS,1
env=XDG_SCREENSHOTS_DIR,$HOME/Pictures/Screenshots
env=MOZ_ENABLE_WAYLAND,1


# If there is just one tiling window on the workspace it will be borderless
windowrule {
  name = windowrule-1
  border_size = 0
  match:float = 0
  match:workspace = w[t1]
}


# Floating by default
windowrule {
  name = windowrule-2
  float = on
  match:class = (mpv)|(qview)|(anki)|(showmethekey-gtk)|(Emulator)|(blueman-manager)
}


# Where to spawn showmethekey-gtk window
windowrule {
  name = windowrule-3
  move = (990) (60)
  size = 900 170
  pin = on
  no_initial_focus = on
  border_size = 0
  no_focus = on
  match:class = (showmethekey-gtk)
}


# Distribution of windows among workspaces
windowrule {
  name = windowrule-4
  float = on
  center = on
  size = 1250 700
  move = (330) ((monitor_h*0.15))
  match:class = ^(com.interversehq.qView)$
}

windowrule {
  name = windowrule-5
  float = on
  size = 650 400
  move = (785) (625)
  match:class = ^(pavucontrol)$
}

windowrule {
  name = windowrule-6
  float = on
  size = 650 400
  move = (785) (625)
  match:class = ^(com.github.wwmm.easyeffects)$
}

windowrule {
  name = windowrule-7
  float = on
  center = on
  size = 900 600
  match:class = ^(mpv)$
}

windowrule {
  name = windowrule-8
  float = on
  center = on
  size = 1300 800
  match:class = ^(org.gnome.Nautilus)$
}

windowrule {
  name = windowrule-9
  float = on
  center = on
  size = 900 600
  match:class = ^(org.gnome.FileRoller)$
}

windowrule {
  name = windowrule-10
  float = on
  center = on
  size = 500 600
  match:class = ^(org.gnome.Calculator)$
}

windowrule {
  name = windowrule-11
  float = on
  center = on
  match:class = ^(io.github.kukuruzka165.materialgram)$
  match:title = ^(Media viewer)$
}

# windowrule=fullscreen,class:^(io.github.kukuruzka165.materialgram)$,title:^(Media viewer)$
windowrule {
  name = windowrule-12
  workspace = 1 silent
  match:class = ^(dota2)$
}

windowrule {
  name = windowrule-13
  workspace = 1 silent
  match:class = ^(starrail.exe)$
}

windowrule {
  name = windowrule-14
  workspace = 2
  match:class = (firefox-developer-edition)
}

windowrule {
  name = windowrule-15
  workspace = 3
  match:class = (discord)
}

windowrule {
  name = windowrule-16
  workspace = 5
  match:class = (spotify)
}

windowrule {
  name = windowrule-17
  workspace = 4
  match:class = (io.github.kukuruzka165.materialgram)
}

windowrule {
  name = windowrule-18
  workspace = 6
  match:class = (com.obsproject.Studio)
}


# xwayland fixes
windowrule {
  name = windowrule-19
  suppress_event = maximize
  match:class = .*0windowrulev2=nofocus
  match:class = ^$
  match:title = ^$
  match:xwayland = 1
  match:float = 1
  match:fullscreen = 0
  match:pin = 0
}

windowrule {
  name = windowrule-20
  opacity = 0.0 override
  no_anim = on
  no_initial_focus = on
  max_size = 1 1
  no_blur = on
  no_focus = on
  match:class = ^(xwaylandvideobridge)$
}


# No gaps for all windows
workspace=w[tv1], gapsout:0, gapsin:0
workspace=f[1], gapsout:0, gapsin:0

exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

